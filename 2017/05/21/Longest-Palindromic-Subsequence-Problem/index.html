
<!DOCTYPE html>
<html lang="zh-cn,en,default">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="洗奶瓶">
    <title>Longest Palindromic Subsequence Problem - 洗奶瓶</title>
    <meta name="author" content="奶瓶清洗工程师">
    
    
        <link rel="icon" href="http://changecong.github.io/blog/assets/images/favicon.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"奶瓶清洗工程师","sameAs":["https://changecong.github.io/"],"image":"zombie-cong.png"},"articleBody":"\nDescriptionGiven a string s, find the longest palindromic subsequence’s length in s. You may assume that the maximum length of s is 1000.\nAnalysisThe brute-force solution of this problem is to find all the subsequence of the string and determine if they are palindromic or not. Then find the length of the longest palindromic one.\nThe the time complexity would be as same as all the combination of chars of the string, which is O(2^n). And this complexity is usually unacceptable.\nWhile working on this type of problem, the very first optimization would be using dynamic programming (DP). Then let’s consider how to find the longest palindromic by using previous states.\n\nIf a string is palindromic, then its first character and the last one should be same.\nOnce the first and last character is same, the length of the longest palindromic substring should be the longest of the string excludes the first and last character plus 2.\n\nLet’s use a 2-d matrix longest[][] whose elements longest[row][col] represent the length of the longest palindromic substring (character at row &amp; col are included), then we have the formula to calculate it using DP:1234if char at row equals to char at col:  longest[row][col] = longest[row + 1][col - 1] + 2else  longest[row][col] = max between longest[row + 1][col] and longest[row][col - 1]\nSolution123456789101112131415161718192021222324252627282930313233public int longestPalindromeSubseq(String s) &#123;    if (s == null) &#123;        return 0;    &#125;    final int length = s.length();    final int[][] dp = new int[length][length];    // dp[i][j]: longest from char i to char j    //    // if char(i) == char(j)    //   dp[i][j] = dp[i + 1][j - 1] + 2    // else    //   max(dp[i + 1][j], dp[i][j - 1])    for (int row = length - 1; row &gt;= 0; --row) &#123;        // diagonal        dp[row][row] = 1;        // only need to consider half of the matrix        for (int col = row + 1; col &lt; length; ++col) &#123;            if (s.charAt(row) == s.charAt(col)) &#123;                dp[row][col] = dp[row + 1][col - 1] + 2;            &#125; else &#123;                dp[row][col] = Math.max(dp[row + 1][col], dp[row][col - 1]);            &#125;        &#125;    &#125;    return dp[0][length - 1];&#125;","dateCreated":"2017-05-21T14:08:42+08:00","dateModified":"2020-02-01T20:20:12+08:00","datePublished":"2017-05-21T14:08:42+08:00","description":"This is another problem from LeetCode.","headline":"Longest Palindromic Subsequence Problem","image":["algorithm.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"http://changecong.github.io/blog/2017/05/21/Longest-Palindromic-Subsequence-Problem/"},"publisher":{"@type":"Organization","name":"奶瓶清洗工程师","sameAs":["https://changecong.github.io/"],"image":"zombie-cong.png","logo":{"@type":"ImageObject","url":"zombie-cong.png"}},"url":"http://changecong.github.io/blog/2017/05/21/Longest-Palindromic-Subsequence-Problem/","keywords":"English, Algorithms, Dynamic Programming","thumbnailUrl":"algorithm.jpg"}</script>
    <meta name="description" content="This is another problem from LeetCode.">
<meta name="keywords" content="English,Algorithms,Dynamic Programming">
<meta property="og:type" content="blog">
<meta property="og:title" content="Longest Palindromic Subsequence Problem">
<meta property="og:url" content="http://changecong.github.io/blog/2017/05/21/Longest-Palindromic-Subsequence-Problem/index.html">
<meta property="og:site_name" content="洗奶瓶">
<meta property="og:description" content="This is another problem from LeetCode.">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-02-01T12:20:12.265Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Longest Palindromic Subsequence Problem">
<meta name="twitter:description" content="This is another problem from LeetCode.">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/0911199c912d379f8eaea177b0746fe4?s=640"/>
    
    
        <meta property="og:image" content="http://changecong.github.io/blog/2017/05/21/Longest-Palindromic-Subsequence-Problem/algorithm.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://changecong.github.io/blog/2017/05/21/Longest-Palindromic-Subsequence-Problem/algorithm.jpg"/>
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/blog/assets/css/style-a4vqowgrgnd4tuobqr66kpxloym0wbzuquuqd8yjg3buzfhgx9l4zwakv6qt.min.css">
    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/blog/ "
            aria-label=""
        >
            洗奶瓶
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /blog/#about"
            >
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/0911199c912d379f8eaea177b0746fe4?s=90" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/blog/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/0911199c912d379f8eaea177b0746fe4?s=110" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">奶瓶清洗工程师</h4>
                
                    <h5 class="sidebar-profile-bio"><p>洗奶瓶是我每天的主要工作</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/blog/ "
                            
                            title="首页"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/blog/all-categories"
                            
                            title="分类"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/blog/all-tags"
                            
                            title="标签"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="搜索"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="关于"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://changecong.github.io/" target="_blank" rel="noopener" title="简历">
                    
                        <i class="sidebar-button-icon fa fa-address-card" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">简历</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Longest Palindromic Subsequence Problem
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2017-05-21T14:08:42+08:00">
	
		    5月 21, 2017
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt -->
<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Given a string s, find the longest palindromic subsequence’s length in s. You may assume that the maximum length of s is 1000.</p>
<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><p>The brute-force solution of this problem is to find all the subsequence of the string and determine if they are palindromic or not. Then find the length of the longest palindromic one.</p>
<p>The the time complexity would be as same as all the combination of chars of the string, which is O(2^n). And this complexity is usually unacceptable.</p>
<p>While working on this type of problem, the very first optimization would be using dynamic programming (DP). Then let’s consider how to find the longest palindromic by using previous states.</p>
<ul>
<li>If a string is palindromic, then its first character and the last one should be same.</li>
<li>Once the first and last character is same, the length of the longest palindromic substring should be the longest of the string excludes the first and last character plus 2.</li>
</ul>
<p>Let’s use a 2-d matrix longest[][] whose elements longest[row][col] represent the length of the longest palindromic substring (character at row &amp; col are included), then we have the formula to calculate it using DP:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if char at row equals to char at col:</span><br><span class="line">  longest[row][col] = longest[row + 1][col - 1] + 2</span><br><span class="line">else</span><br><span class="line">  longest[row][col] = max between longest[row + 1][col] and longest[row][col - 1]</span><br></pre></td></tr></table></figure></p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> length = s.length();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][length];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dp[i][j]: longest from char i to char j</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// if char(i) == char(j)</span></span><br><span class="line">    <span class="comment">//   dp[i][j] = dp[i + 1][j - 1] + 2</span></span><br><span class="line">    <span class="comment">// else</span></span><br><span class="line">    <span class="comment">//   max(dp[i + 1][j], dp[i][j - 1])</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> row = length - <span class="number">1</span>; row &gt;= <span class="number">0</span>; --row) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// diagonal</span></span><br><span class="line">        dp[row][row] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// only need to consider half of the matrix</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> col = row + <span class="number">1</span>; col &lt; length; ++col) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(row) == s.charAt(col)) &#123;</span><br><span class="line">                dp[row][col] = dp[row + <span class="number">1</span>][col - <span class="number">1</span>] + <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[row][col] = Math.max(dp[row + <span class="number">1</span>][col], dp[row][col - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][length - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/blog/tags/Algorithms/">Algorithms</a> <a class="tag tag--primary tag--small t-link" href="/blog/tags/Dynamic-Programming/">Dynamic Programming</a> <a class="tag tag--primary tag--small t-link" href="/blog/tags/English/">English</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/blog/2017/05/30/Guo-nei-de-wu-lian-wang-yun-fu-wu/"
                    data-tooltip="国内的物联网云服务"
                    aria-label="上一篇: 国内的物联网云服务"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/blog/2017/05/20/Edit-Distance-Problem/"
                    data-tooltip="Edit Distance Problem"
                    aria-label="下一篇: Edit Distance Problem"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 奶瓶清洗工程师. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/blog/2017/05/30/Guo-nei-de-wu-lian-wang-yun-fu-wu/"
                    data-tooltip="国内的物联网云服务"
                    aria-label="上一篇: 国内的物联网云服务"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/blog/2017/05/20/Edit-Distance-Problem/"
                    data-tooltip="Edit Distance Problem"
                    aria-label="下一篇: Edit Distance Problem"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                

            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/0911199c912d379f8eaea177b0746fe4?s=110" alt="作者的图片"/>
        
            <h4 id="about-card-name">奶瓶清洗工程师</h4>
        
            <div id="about-card-bio"><p>洗奶瓶是我每天的主要工作</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>高级奶瓶清洗工程师</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                北京
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/blog/assets/images/ring-road-view.png');"></div>
        <!--SCRIPTS-->
<script src="/blog/assets/js/script-6u5mieyjnrelgr21a4kzdug9tqnkpinicprkprrarurmgmfvjhsdcvb0w2rz.min.js"></script>
<!--SCRIPTS END-->


    




    </body>
</html>
